<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  <title>Shallow Copy å’Œ Deep Copy | å†™ä½œå³æ€è€ƒ</title>
  
  

  
  <link rel="alternate" href="/blog/atom.xml" title="å†™ä½œå³æ€è€ƒ">
  

  <meta name="HandheldFriendly" content="True" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!-- meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.10.1/css/all.min.css">
  

  
  <link rel="shortcut icon" type='image/x-icon' href="/blog/images/favicon.ico">
  

  
    
<link rel="stylesheet" href="/blog/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/blog/atom.xml" title="å†™ä½œå³æ€è€ƒ" type="application/atom+xml"><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body>
  
  
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="cover-wrapper">
    <cover class='cover post half'>
      
        
  <h1 class='title'>å†™ä½œå³æ€è€ƒ</h1>


  <div class="m_search">
    <form name="searchform" class="form u-search-form">
      <input type="text" class="input u-search-input" placeholder="" />
      <i class="icon fas fa-search fa-fw"></i>
    </form>
  </div>

<div class='menu navgation'>
  <ul class='h-list'>
    
      
        <li>
          <a class="nav home" href="/blog/"
            
            
            id="blog">
            <i class='fas fa-home fa-fw'></i>&nbsp;é¦–é¡µ
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/blog/archives/"
            
              rel="nofollow"
            
            
            id="blogarchives">
            <i class='fas fa-archive fa-fw'></i>&nbsp;å½’æ¡£
          </a>
        </li>
      
        <li>
          <a class="nav home" href="/blog/about/"
            
              rel="nofollow"
            
            
            id="blogabout">
            <i class='fas fa-info-circle fa-fw'></i>&nbsp;å…³äºæœ¬ç«™
          </a>
        </li>
      
    
  </ul>
</div>

      
    </cover>
    <header class="l_header pure">
  <div id="loading-bar-wrapper">
    <div id="loading-bar" class="pure"></div>
  </div>

	<div class='wrapper'>
		<div class="nav-main container container--flex">
      <a class="logo flat-box" href='/blog/' >
        
          å†™ä½œå³æ€è€ƒ
        
      </a>
			<div class='menu navgation'>
				<ul class='h-list'>
          
  					
  						<li>
								<a class="nav flat-box" href="/blog/"
                  
                  
                  id="blog">
									<i class='fas fa-home fa-fw'></i>&nbsp;é¦–é¡µ
								</a>
							</li>
      			
  						<li>
								<a class="nav flat-box" href="/blog/archives/"
                  
                    rel="nofollow"
                  
                  
                  id="blogarchives">
									<i class='fas fa-archive fa-fw'></i>&nbsp;å½’æ¡£
								</a>
							</li>
      			
      		
				</ul>
			</div>

			
				<div class="m_search">
					<form name="searchform" class="form u-search-form">
						<input type="text" class="input u-search-input" placeholder="æœç´¢" />
						<i class="icon fas fa-search fa-fw"></i>
					</form>
				</div>
			
			<ul class='switcher h-list'>
				
					<li class='s-search'><a class="fas fa-search fa-fw" href='javascript:void(0)'></a></li>
				
				<li class='s-menu'><a class="fas fa-bars fa-fw" href='javascript:void(0)'></a></li>
			</ul>
		</div>

		<div class='nav-sub container container--flex'>
			<a class="logo flat-box"></a>
			<ul class='switcher h-list'>
				<li class='s-comment'><a class="flat-btn fas fa-comments fa-fw" href='javascript:void(0)'></a></li>
        
          <li class='s-toc'><a class="flat-btn fas fa-list fa-fw" href='javascript:void(0)'></a></li>
        
			</ul>
		</div>
	</div>
</header>
	<aside class="menu-phone">
    <header>
		<nav class="menu navgation">
      <ul>
        
          
            <li>
							<a class="nav flat-box" href="/blog/"
                
                
                id="blog">
								<i class='fas fa-home fa-fw'></i>&nbsp;é¦–é¡µ
							</a>
            </li>
          
            <li>
							<a class="nav flat-box" href="/blog/archives/"
                
                  rel="nofollow"
                
                
                id="blogarchives">
								<i class='fas fa-archive fa-fw'></i>&nbsp;å½’æ¡£
							</a>
            </li>
          
       
      </ul>
		</nav>
    </header>
	</aside>
<script>setLoadingBarProgress(40);</script>

  </div>


  <div class="l_body">
    <div class='body-wrapper'>
      <div class='l_main'>
  

  <article id="post" class="post white-box article-type-post" itemscope itemprop="blogPost">
    


  <section class='meta'>
    
    
    <div class="meta" id="header-meta">
      
        
  
    <h1 class="title">
      <a href="/blog/2019/11/30/coding-13-deepcopy/">
        Shallow Copy å’Œ Deep Copy
      </a>
    </h1>
  


      
      <div class='new-meta-box'>
        
          
        
          
            <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt" aria-hidden="true"></i>
    <p>2019-12-01</p>
  </a>
</div>

          
        
          
            
  
  <div class='new-meta-item category'>
    <a href='/blog/categories/Coding/' rel="nofollow">
      <i class="fas fa-folder-open" aria-hidden="true"></i>
      <p>Coding</p>
    </a>
  </div>


          
        
          
            
  

          
        
          
            

          
        
      </div>
      
        <hr>
      
    </div>
  </section>


    <section class="article typo">
      <div class="article-entry" itemprop="articleBody">
        <p>åœ¨ç© JavaScript æ—¶ç¢°åˆ°äº† deep copy çš„é—®é¢˜ï¼Œæƒ³èµ·å­¦ python æ—¶ä¹Ÿç¢°åˆ°è¿‡ï¼Œé‚æœ‰æ­¤æ–‡ï¼Œäº’ç›¸å°è¯ã€‚</p>
<p>æœ¬æ–‡ä¾æ¬¡è®¨è®ºï¼š</p>
<ul>
<li>variable assignment</li>
<li>shallow copy</li>
<li>deep copy</li>
</ul>
<a id="more"></a>
<h2 id="Variable-Assignment"><a href="#Variable-Assignment" class="headerlink" title="Variable Assignment"></a>Variable Assignment</h2><p>åœ¨ç†è§£ shallow copy å’Œ deep copy ä¹‹å‰ï¼Œéœ€è¦å…ˆç†è§£ï¼šassignment ä¸æ˜¯å¤åˆ¶ï¼Œåªæ˜¯æ˜ å°„ã€‚</p>
<p>ä½†å¯¹ primitive data typeï¼Œassignment ä¼šå®é™…ä¸Šé€ æˆâ€œå¤åˆ¶â€çš„æ•ˆæœã€‚</p>
<h3 id="Primitive-Data-Type"><a href="#Primitive-Data-Type" class="headerlink" title="Primitive Data Type"></a>Primitive Data Type</h3><p>Python æœ‰å¦‚ä¸‹åŸºç¡€æ•°æ®ç»“æ„ï¼š</p>
<ul>
<li>integers</li>
<li>floats</li>
<li>strings</li>
<li>booleans</li>
</ul>
<p>ä¸‹é¢è¿™æ®µä»£ç çš„æ‰“å°ç»“æœæ˜¯æ–°æ‰‹éƒ½èƒ½çŒœåˆ°çš„ï¼š</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = a</span><br><span class="line">a = <span class="number">3</span> </span><br><span class="line">print(b) <span class="comment"># 1</span></span><br></pre></td></tr></tbody></table></figure>
<p>æŠŠ <code>a</code> çš„å€¼èµ‹ç»™ <code>b</code> ä¹‹åï¼Œå†æ”¹å˜ <code>a</code> çš„å€¼ï¼Œå¹¶ä¸ä¼šæ”¹å˜ <code>b</code> çš„å€¼ã€‚</p>
<p>JavaScript ä¹Ÿæœ‰ primitive data typeï¼š</p>
<ul>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
</ul>
<p>æ‰€ä»¥ä¸‹é¢çš„ä»£ç ä¹Ÿä¼šæ‰“å°å‡º 1ã€‚</p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">1</span></span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">a = <span class="number">3</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// 1</span></span><br></pre></td></tr></tbody></table></figure>
<p>R è¯­è¨€ä¹Ÿæ˜¯è¿™æ ·ï¼ˆä¸‹é¢è¿™æ®µä»£ç è·Ÿ python çš„ä¾‹å­ä¸€æ‘¸ä¸€æ · <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60f.png?v8">ğŸ˜</span>)ï¼š</p>
<figure class="highlight r"><figcaption><span>R</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line">b = a</span><br><span class="line">a = <span class="number">3</span> </span><br><span class="line">print(b) <span class="comment"># 1</span></span><br></pre></td></tr></tbody></table></figure>
<p>åˆå­¦è€…ç»å¸¸ä¼šæœ‰ç§é”™è¯¯ï¼šä¸Šé¢çš„â€œæ¨¡å¼â€åœ¨ä»»ä½•æƒ…å¢ƒä¸‹éƒ½ä¼šæˆç«‹ã€‚å¯¹ R æ˜¯è¿™æ ·ï¼Œä½†å¯¹ python å’Œ JS ä¸æ˜¯ã€‚</p>
<h3 id="Python-non-primitive-data-type"><a href="#Python-non-primitive-data-type" class="headerlink" title="Python: non-primitive data type"></a>Python: non-primitive data type</h3><p>Python çš„ non-primitive data type åŒ…æ‹¬ä½†ä¸é™äº list, dictionary, class ç­‰ç­‰ã€‚å¯ä»¥è®¤ä¸ºä¸æ˜¯ primitive çš„å°±æ˜¯ non-primitiveã€‚</p>
<p>ä»¥ list ä¸ºä¾‹ï¼Œpython ä¼šæ€ä¹ˆå¤„ç† <code>b = a</code> çš„å˜é‡èµ‹å€¼é—®é¢˜ï¼Ÿ</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = a</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">print(b)</span><br><span class="line"><span class="comment"># [100, 2, 3]</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä¾æ¬¡è§£è¯»ä»£ç å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç¬¬1è¡Œï¼šåˆ›å»ºäº†ä¸€ä¸ª list å¯¹è±¡<code>[1, 2, 3]</code>ï¼Œå¹¶åˆ›å»ºäº†ä¸€ä¸ª variable <code>a</code>ï¼Œç„¶åæŠŠ <code>a</code> æ˜ å°„åˆ° list å¯¹è±¡</li>
<li>ç¬¬2è¡Œï¼šåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„ varialbe <code>b</code>ï¼ŒæŠŠ <code>b</code> æ˜ å°„åˆ° <code>a</code> æ‰€æ˜ å°„çš„å¯¹è±¡<code>[1, 2, 3]</code></li>
<li>ç¬¬3è¡Œï¼šä¿®æ”¹äº†<code>[1, 2, 3]</code>å¯¹è±¡çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¸º100</li>
<li>ç¬¬4è¡Œï¼šæ‰“å°å˜é‡<code>b</code>ï¼Œç»“æœï¼š [100, 2, 3]</li>
</ul>
<p><code>b = a</code> è¿™è¡Œä»£ç å¹¶æ²¡æœ‰çœŸçš„<em>å¤åˆ¶</em>ä¸€ä¸ªå¯¹è±¡ï¼Œåªæ˜¯å¤åˆ¶äº†<em>æ˜ å°„</em>ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬è¯æ˜ <code>a</code> å’Œ <code>b</code> æ˜ å°„åˆ°äº†ä¸€ä¸ªåœ°å€ï¼š</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b = a </span><br><span class="line">print(a <span class="keyword">is</span> b) <span class="comment"># True</span></span><br></pre></td></tr></tbody></table></figure>
<p><code>is</code> operator å¯ä»¥æ£€æŸ¥ä¸¤ä¸ª variable æ˜¯å¦æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®ã€‚<br>å¦ä¸€ä¸ªè¯æ˜æ–¹æ³•æ˜¯ç”¨<code>id()</code>è¿”å›å˜é‡æ‰€åœ¨çš„ä½ç½®ã€‚</p>
<h3 id="JavaScript-non-primitive-data-type"><a href="#JavaScript-non-primitive-data-type" class="headerlink" title="JavaScript: non-primitive data type"></a>JavaScript: non-primitive data type</h3><p>JavaScript çš„ non-primitve data å˜›ï¼Œç†è§£ä¸º Object å°±å·®ä¸å¤šäº†ã€‚æ¯•ç«Ÿï¼Œfunctionã€array ç­‰ç­‰éƒ½æ˜¯ Objectã€‚</p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line"><span class="keyword">var</span> b = a</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(b)</span><br><span class="line"><span class="comment">// [100, 2, 3]</span></span><br></pre></td></tr></tbody></table></figure>
<p>é€»è¾‘å‡ ä¹è·Ÿ python ä¸€æ ·ã€‚</p>
<p>ä½†æˆ‘æ²¡èƒ½åœ¨ JavaScript é‡Œæ‰¾åˆ°ç±»ä¼¼ Python é‡Œçš„ <code>is</code> å’Œ <code>id()</code>ã€‚</p>
<h3 id="R"><a href="#R" class="headerlink" title="R"></a>R</h3><p>R ä¸ä¸€æ ·ã€‚</p>
<p>ä¸ç®¡æ˜¯ primitive data è¿˜æ˜¯ non-primitive dataï¼ŒR éƒ½ä¼šå½“ä½œ primitive data ä¸€æ ·å¤åˆ¶ï¼š</p>
<figure class="highlight r"><figcaption><span>R</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a &lt;- c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">b &lt;- a </span><br><span class="line">a[<span class="number">1</span>] = <span class="number">100</span></span><br><span class="line">print(b)</span><br><span class="line"><span class="comment"># 1 2 3</span></span><br></pre></td></tr></tbody></table></figure>
<p>Python å’Œ Javascript çš„ <code>b</code> ä¼šéšç€ <code>a</code> ä¸€èµ·å˜åŒ–ï¼ŒR å´ä¸ä¼šã€‚æ˜¯ä¸æ˜¯å¯ä»¥æ¨æµ‹è¯´ <code>b &lt;- a</code> è¿™è¡Œä»£ç ä¼šåˆ›å»ºæ–°çš„ object å‘¢ï¼Ÿ</p>
<p>å¹¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸¤ä¸ªå˜é‡æŒ‡å‘çš„ä½ç½®ï¼š</p>
<figure class="highlight r"><figcaption><span>R</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a &lt;- c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">b &lt;- a </span><br><span class="line">print(lobstr::obj_addr(a)) <span class="comment">#"0x7fbd42342078"</span></span><br><span class="line">print(lobstr::obj_addr(b)) <span class="comment">#"0x7fbd42342078"</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">1</span>] &lt;- <span class="number">100</span></span><br><span class="line">print(lobstr::obj_addr(a)) <span class="comment">#"0x7fbd42342058"</span></span><br><span class="line">print(lobstr::obj_addr(b)) <span class="comment">#"0x7fbd42342078"</span></span><br></pre></td></tr></tbody></table></figure>
<p>ç¬¬3è¡Œå’Œç¬¬4è¡Œè¯´æ˜ä¸¤ä¸ª<code>a</code>å’Œ<code>b</code>æ˜ å°„åˆ°äº†åŒä¸€ä¸ªåœ°å€ã€‚<br>ä½†ç¬¬8è¡Œé‡Œï¼Œa æ˜ å°„çš„åœ°å€å˜äº†ã€‚<code>a[1] = 100</code> åˆ›é€ å‡ºäº†ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>
<p>è™½ç„¶<code>b &lt;- a</code> æ˜¯æŠŠ <code>b</code> æ˜ å°„åˆ°äº† <code>c(1,2,3)</code>ï¼Œä½†å¦‚æœä¿®æ”¹<code>a</code>æˆ–<code>b</code>çš„å…¶ä¸­ä»»ä½•ä¸€ä¸ªï¼Œéƒ½ä¼šå†åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚</p>
<p>æ‰€ä»¥åœ¨ R é‡Œæˆ‘ä»¬å¯ä»¥å†™ <code>df2 &lt;- df1</code> è¿™æ ·çš„è¯­å¥ï¼Œç„¶åä¸æ‹…å¿ƒä¿®æ”¹ <code>df2</code> ä¼šå½±å“ <code>df1</code>ã€‚</p>
<p><strong>è¿™ä¸ªä¾‹å­å¯ä»¥ç”¨æ¥è¯´æ˜ä¸ºä»€ä¹ˆ R è¯­è¨€æ›´é€‚åˆå½“ä½œç»Ÿè®¡å­¦åˆå­¦è€…çš„å­¦ä¹ å·¥å…·</strong>ï¼Œå› ä¸ºå®ƒä¸å­˜åœ¨å…¶ä»–è¯­è¨€ä¸ºäº†ä¼˜åŒ–æ€§èƒ½è€Œè®¾è®¡çš„ç§ç§â€œåç›´è§‰è®¾å®šâ€ã€‚</p>
<h2 id="Shallow-Copy"><a href="#Shallow-Copy" class="headerlink" title="Shallow Copy"></a>Shallow Copy</h2><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><p>åˆšæ‰å·²ç»è¯æ˜äº†<code>a = b</code>ä¸èƒ½å®ç° copyï¼Œåªæ˜¯å¤åˆ¶äº†ä¸€ä¸ªæ˜ å°„ã€‚</p>
<p>ä¸‹é¢ç ”ç©¶å¦‚ä½•å¤åˆ¶ã€‚</p>
<p>å¦‚æœæƒ³å¤åˆ¶ <code>list</code>ï¼Œ<code>dictionary</code>æˆ–<code>set</code>ï¼Œå¯ä»¥ç›´æ¥ç”¨<code>list()</code>,<code>dict()</code>æˆ–<code>set()</code>ã€‚</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b = list(a)</span><br><span class="line"></span><br><span class="line">print(b <span class="keyword">is</span> a) <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">print(b) <span class="comment"># [1, 2, 3]</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œæ˜¯ç”¨ <code>copy</code> library é‡Œçš„ <code>copy()</code> å‡½æ•°ã€‚</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = copy.copy(a)</span><br><span class="line">print(a <span class="keyword">is</span> b) <span class="comment"># False</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¦‚æœæ˜¯å…¶ä»– objectï¼Œæ¯”å¦‚ classï¼Œæ²¡æœ‰ç±»ä¼¼<code>list()</code>è¿™æ ·çš„å‡½æ•°ï¼Œå°±å¯ä»¥ç›´æ¥ç”¨<code>copy()</code>å®ç°å¤åˆ¶ã€‚</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span><span class="params">()</span>:</span></span><br><span class="line">  </span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, gender)</span>:</span></span><br><span class="line">    self.name = name</span><br><span class="line">    self.gender = gender</span><br><span class="line">    </span><br><span class="line">tom = Person(<span class="string">'Tom'</span>, <span class="string">'Female'</span>)</span><br><span class="line"></span><br><span class="line">tom_2 = tom</span><br><span class="line marked">print(tom <span class="keyword">is</span> tom_2) <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">tom_3 = copy.copy(tom)</span><br><span class="line marked">print(tom <span class="keyword">is</span> tom_3) <span class="comment"># False</span></span><br></pre></td></tr></tbody></table></figure>
<p>ç¬¬12è¡Œï¼šclass çš„ instance åœ¨ä½¿ç”¨<code>a = b</code>æ—¶ä¹Ÿåªä¼šå¤åˆ¶æ˜ å°„ï¼Œä¸ä¼šå¤åˆ¶ä¸€ä¸ªæ–°çš„ instanceã€‚<br>ç¬¬15è¡Œï¼šç”¨ <code>copy()</code> å¯ä»¥å¤åˆ¶ä¸€ä¸ªæ–°çš„ instanceã€‚</p>
<p><strong>ä½†è¿™è¿˜æ²¡å®Œ</strong>ï¼ŒçœŸæ­£çš„å‘ç‚¹åœ¨è¿™é‡Œï¼šä¸Šé¢çš„ copy æ–¹æ³•éƒ½æ˜¯ shallow copyï¼Œshallow copy åªä¼š<strong>å¤åˆ¶å¯¹è±¡çš„ä¸€å±‚</strong>ï¼Œå¯¹è±¡å†…åµŒå¥—çš„å¯¹è±¡éƒ½åªä¼šå¤åˆ¶æ˜ å°„ã€‚</p>
<p>çœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">a = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line">b = copy.copy(a)  <span class="comment"># ç­‰ä»·äº b = list(a) </span></span><br><span class="line">print(a <span class="keyword">is</span> b)   <span class="comment"># False</span></span><br><span class="line">print(a[<span class="number">0</span>] <span class="keyword">is</span> b[<span class="number">0</span>])   <span class="comment"># True</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">print(b)  <span class="comment"># [[100, 2, 3], [4, 5, 6], [7, 8, 9]]</span></span><br></pre></td></tr></tbody></table></figure>
<p>è¿™æ®µä»£ç é‡Œæœ‰è¶£çš„åœ°æ–¹ï¼š</p>
<ul>
<li>å…ˆåˆ›å»ºäº†ä¸€ä¸ªå…ƒç´ ä¸º list çš„ listï¼Œæ˜ å°„åˆ°<code>a</code></li>
<li>ç„¶åå¤åˆ¶å‡º <code>b</code></li>
<li>ç¬¬5è¡Œï¼šè¯æ˜ <code>a</code> å’Œ <code>b</code> æ²¡æœ‰æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®</li>
<li>ç¬¬6è¡Œï¼šè¯æ˜ <code>a</code> å’Œ <code>b</code> çš„å…ƒç´ æ˜ å°„åˆ°äº†åŒä¸€ä¸ªä½ç½®</li>
<li>ç¬¬8å’Œç¬¬9è¡Œï¼šæ›´ç›´è§‚åœ°è¯æ˜ä¸Šé¢çš„è§‚ç‚¹</li>
</ul>
<p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•è®© <code>b</code> ä»å¤–åˆ°å†…åœ°å¤åˆ¶ <code>a</code>ï¼Œè€Œä¸åªæ˜¯å¤åˆ¶â€œè¡¨é¢ä¸€å±‚â€å‘¢ï¼Ÿè¿™å°±æ˜¯ deep copy çš„å·¥ä½œã€‚</p>
<p>åœ¨ä»‹ç»æ€ä¹ˆç”¨ python åš deep copy å‰ï¼Œå…ˆçœ‹çœ‹ JavaScript çš„ shallow copyã€‚</p>
<h3 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h3><p>JavaScript æä¾›äº†ä¸¤ç§ shallow copy çš„æ–¹å¼ï¼š</p>
<ul>
<li><code>Object.assign()</code></li>
<li>Spread Operator: <code>...</code></li>
</ul>
<p>å…ˆçœ‹ <code>Object.assign()</code></p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line marked"><span class="keyword">var</span> b = <span class="built_in">Object</span>.assign([], a)</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></tbody></table></figure>
<p>å†çœ‹ Spread Operatorï¼š</p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line marked"><span class="keyword">var</span> b = [...a]</span><br><span class="line">a[<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¯¹äº shallow copyï¼ŒJS ä¹Ÿæœ‰è·Ÿ Python ä¸€æ ·çš„è®¾å®šï¼šåªä¼šå¤åˆ¶ç¬¬1å±‚ï¼Œå¦‚æœ Object å†…åŒ…å« Objectï¼Œå°±åªä¼šå¤åˆ¶æ˜ å°„ã€‚</p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line"><span class="keyword">var</span> b = <span class="built_in">Object</span>.assign([], a)</span><br><span class="line">a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// [ [ 100, 2, 3 ], [ 4, 5, 6 ] ]</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä¸‹é¢è¿›å…¥ Deep Copy éƒ¨åˆ†ã€‚</p>
<h2 id="Deep-Copy"><a href="#Deep-Copy" class="headerlink" title="Deep Copy"></a>Deep Copy</h2><p>Deep copy èƒ½å¤Ÿâ€œå®Œæ•´å¤åˆ¶â€ä¸€ä¸ªå¯¹è±¡ã€‚</p>
<h3 id="Python-1"><a href="#Python-1" class="headerlink" title="Python"></a>Python</h3><p>Python å¯ä»¥ä½¿ç”¨ copy åŒ…é‡Œçš„ <code>deepcopy()</code> å‡½æ•°ï¼š</p>
<figure class="highlight python"><figcaption><span>Python</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line"></span><br><span class="line">a = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]]</span><br><span class="line marked">b = copy.deepcopy(a)  </span><br><span class="line">print(a <span class="keyword">is</span> b)   <span class="comment"># False</span></span><br><span class="line">print(a[<span class="number">0</span>] <span class="keyword">is</span> b[<span class="number">0</span>])   <span class="comment"># False</span></span><br><span class="line"></span><br><span class="line">a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line">print(b)  <span class="comment"># [[1, 2, 3], [4, 5, 6], [7, 8, 9]]</span></span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šé¢çš„ä»£ç å®ç°äº† deep copyã€‚</p>
<h3 id="JavaScript-1"><a href="#JavaScript-1" class="headerlink" title="JavaScript"></a>JavaScript</h3><p>JavaScript æ²¡æœ‰ built-in module é‡Œæœ‰ç±»ä¼¼ python çš„ <code>deepcopy</code> è¿™æ ·çš„å‡½æ•°ï¼Œä½†ä¸»æµç¬¬ä¸‰æ–¹ module é‡Œéƒ½æä¾›äº†è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬ä¸éœ€è¦é‡å¤é€ è½®å­ã€‚</p>
<p>å¦‚æœ Object çš„ value åªæœ‰ primitive dataï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªç®€å•çš„æ–¹æ³•ï¼š<code>JSON.parse(JSON.stringify(object))</code>:</p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]</span><br><span class="line marked"><span class="keyword">var</span> b = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(a))</span><br><span class="line">a[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">100</span></span><br><span class="line"><span class="built_in">console</span>.log(b) <span class="comment">// [ [ 1, 2, 3 ], [ 4, 5, 6 ] ]</span></span><br></pre></td></tr></tbody></table></figure>
<p>æ³¨æ„ï¼šå¦‚æœ value å€¼æ˜¯æ—¥æœŸã€regex ç­‰ç­‰é primitive data çš„å¯¹è±¡ï¼Œè¿™ä¸ªæ–¹æ³•ä¸èƒ½ä½¿ç”¨ã€‚</p>
<p>å‚è€ƒä¸‹é¢çš„ä¾‹å­ï¼š</p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> person = {</span><br><span class="line marked">  name: <span class="string">'YuYu'</span>, </span><br><span class="line">  func: <span class="keyword">new</span> <span class="built_in">Function</span>()</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> personCopy = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(person))</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person) <span class="comment">// { name: 'YuYu', func: [Function: anonymous] }</span></span><br><span class="line"><span class="built_in">console</span>.log(personCopy) <span class="comment">// { name: 'YuYu' }</span></span><br></pre></td></tr></tbody></table></figure>
<p>å¤åˆ¶ä¹‹åï¼Œ<code>func</code> è¿™ä¸ª key-value ä¸¢å¤±äº†ã€‚</p>
<p>æœ€ä¿é™©çš„æ–¹æ³•è¿˜æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œæ¯”å¦‚ lodashï¼š</p>
<figure class="highlight js"><figcaption><span>JavaScript</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> cloneDeep = <span class="built_in">require</span>(<span class="string">'lodash/cloneDeep'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = {</span><br><span class="line">  name: <span class="string">'YuYu'</span>, </span><br><span class="line">  book: {</span><br><span class="line">    title: <span class="string">'JS is cool'</span>,</span><br><span class="line">    pages: <span class="number">300</span>,</span><br><span class="line">  },</span><br><span class="line">  func: <span class="keyword">new</span> <span class="built_in">Function</span>()</span><br><span class="line">}</span><br><span class="line marked"><span class="keyword">var</span> personCopy = cloneDeep(person)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person) </span><br><span class="line"><span class="built_in">console</span>.log(personCopy) </span><br></pre></td></tr></tbody></table></figure>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­é‡Œï¼ŒåµŒå¥—çš„ object ä»¥åŠ non-primitive å€¼ä¹Ÿèƒ½ä¿ç•™ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://realpython.com/copying-python-objects/" target="_blank" rel="noopener">Shallow vs Deep Copying of Python Objects</a></li>
<li><a href="https://flaviocopes.com/how-to-clone-javascript-object/" target="_blank" rel="noopener">How to deep clone a JavaScript object</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
      </div>
      
      
        <br>
        


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/JavaScript/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i><p>JavaScript</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/Python/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i><p>Python</p></a></div> <div class="new-meta-item meta-tags"><a class="tag" href="/blog/tags/R/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i><p>R</p></a></div>


        
      
    </div>
  </section>


      
      
          <div class="prev-next">
              
                  <section class="prev">
                      <span class="art-item-left">
                          <h6><i class="fas fa-chevron-left" aria-hidden="true"></i>&nbsp;ä¸Šä¸€é¡µ</h6>
                          <h4>
                              <a href="/blog/2020/01/20/ds-5-beware-of-mean/" rel="prev" title="å°å¿ƒå‡å€¼">
                                
                                    å°å¿ƒå‡å€¼
                                
                              </a>
                          </h4>
                          
                      </span>
                  </section>
              
              
                  <section class="next">
                      <span class="art-item-right" aria-hidden="true">
                          <h6>ä¸‹ä¸€é¡µ&nbsp;<i class="fas fa-chevron-right" aria-hidden="true"></i></h6>
                          <h4>
                              <a href="/blog/2019/09/02/ds-7-knn/" rel="prev" title="KNN ç®—æ³•">
                                  
                                      KNN ç®—æ³•
                                  
                              </a>
                          </h4>
                          
                              
                              <h6 class="tags">
                                  <a class="tag" href="/blog/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"><i class="fas fa-tag fa-fw" aria-hidden="true"></i> æœºå™¨å­¦ä¹ </a>
                              </h6>
                          
                      </span>
                  </section>
              
          </div>
      
    </section>
  </article>



  <!-- æ˜¾ç¤ºæ¨èæ–‡ç« å’Œè¯„è®º -->



  






<!-- æ ¹æ®é¡µé¢mathjaxå˜é‡å†³å®šæ˜¯å¦åŠ è½½MathJaxæ•°å­¦å…¬å¼js -->



  <script>
    window.subData = {
      title: 'Shallow Copy å’Œ Deep Copy',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
    
    
      
      
        
          
          
        
          
          
        
          
          
            
              
  <section class='widget toc-wrapper'>
    
<header class='pure'>
  <div><i class="fas fa-list fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;æœ¬æ–‡ç›®å½•</div>
  
    <!-- <div class='wrapper'><a class="s-toc rightBtn" rel="external nofollow noopener noreferrer" href="javascript:void(0)"><i class="fas fa-thumbtack fa-fw"></i></a></div> -->
  
</header>

    <div class='content pure'>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Variable-Assignment"><span class="toc-text">Variable Assignment</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Primitive-Data-Type"><span class="toc-text">Primitive Data Type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-non-primitive-data-type"><span class="toc-text">Python: non-primitive data type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-non-primitive-data-type"><span class="toc-text">JavaScript: non-primitive data type</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#R"><span class="toc-text">R</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Shallow-Copy"><span class="toc-text">Shallow Copy</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python"><span class="toc-text">Python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript"><span class="toc-text">JavaScript</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Deep-Copy"><span class="toc-text">Deep Copy</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python-1"><span class="toc-text">Python</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript-1"><span class="toc-text">JavaScript</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒ"><span class="toc-text">å‚è€ƒ</span></a></li></ol>
    </div>
  </section>


            
          
        
          
          
        
          
          
        
      
    

  
</aside>

<footer id="footer" class="clearfix">
  
  
  <br>
  <div><p>åšå®¢å†…å®¹éµå¾ª <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0 å›½é™… (CC BY-NC-SA 4.0) åè®®</a></p>
</div>
</footer>
<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>

  <script>
    var GOOGLE_CUSTOM_SEARCH_API_KEY = "";
    var GOOGLE_CUSTOM_SEARCH_ENGINE_ID = "";
    var ALGOLIA_API_KEY = "";
    var ALGOLIA_APP_ID = "";
    var ALGOLIA_INDEX_NAME = "";
    var AZURE_SERVICE_NAME = "";
    var AZURE_INDEX_NAME = "";
    var AZURE_QUERY_KEY = "";
    var BAIDU_API_ID = "";
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/blog/"||"/";
    if(!ROOT.endsWith('/'))ROOT += '/';
  </script>

<script src="//instant.page/1.2.2" type="module" integrity="sha384-2xV8M5griQmzyiY3CDqh1dn4z3llDVqZDqzjzcY+jCBCk/a5fXJmuZ/40JJAPeoU"></script>


  <script async src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.5/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      const $reveal = $('.reveal');
      if ($reveal.length === 0) return;
      const sr = ScrollReveal({ distance: 0 });
      sr.reveal('.reveal');
    });
  </script>


  <script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>
  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>





  
  
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>
    <script type="text/javascript">
      $(function(){
        if ('.cover') {
          $('.cover').backstretch(
          ["https://img.vim-cn.com/29/91197b04c13f512f734a76d4ac422d89dbe229.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        } else {
          $.backstretch(
          ["https://img.vim-cn.com/29/91197b04c13f512f734a76d4ac422d89dbe229.jpg"],
          {
            duration: "6000",
            fade: "2500"
          });
        }
      });
    </script>
  











  
<script src="/blog/js/app.js"></script>



  
<script src="/blog/js/search.js"></script>





<!-- å¤åˆ¶ -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  let COPY_SUCCESS = "å¤åˆ¶æˆåŠŸ";
  let COPY_FAILURE = "å¤åˆ¶å¤±è´¥";
  /*é¡µé¢è½½å…¥å®Œæˆåï¼Œåˆ›å»ºå¤åˆ¶æŒ‰é’®*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>å¤åˆ¶</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //æ‚¨å¯ä»¥åŠ å…¥æˆåŠŸæç¤º
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //æ‚¨å¯ä»¥åŠ å…¥å¤±è´¥æç¤º
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * å¼¹å‡ºå¼æç¤ºæ¡†ï¼Œé»˜è®¤1.5ç§’è‡ªåŠ¨æ¶ˆå¤±
   * @param message æç¤ºä¿¡æ¯
   * @param style æç¤ºæ ·å¼ï¼Œæœ‰alert-successã€alert-dangerã€alert-warningã€alert-info
   * @param time æ¶ˆå¤±æ—¶é—´
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // æˆåŠŸæç¤º
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // å¤±è´¥æç¤º
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // æé†’
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // ä¿¡æ¯æç¤º
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };

</script>


<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* å›¾ç‰‡é‡‡ç”¨æ‡’åŠ è½½å¤„ç†æ—¶,
       * ä¸€èˆ¬å›¾ç‰‡æ ‡ç­¾å†…ä¼šæœ‰ä¸ªå±æ€§åæ¥å­˜æ”¾å›¾ç‰‡çš„çœŸå®åœ°å€ï¼Œæ¯”å¦‚ data-original,
       * é‚£ä¹ˆæ­¤å¤„å°†åŸæœ¬çš„å±æ€§åsrcæ›¿æ¢ä¸ºå¯¹åº”å±æ€§ådata-original,
       * ä¿®æ”¹å¦‚ä¸‹
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });
</script>





  <script>setLoadingBarProgress(100);</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
