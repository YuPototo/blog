<!DOCTYPE html><html lang="cn"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="robots" content="index, follow"><title>ggplotç³»åˆ—ä¹‹ï¼šboxplot â€¢ å•†ä¸šä¸æ•°æ®</title><meta name="description" content="ggplotç³»åˆ—ä¹‹ï¼šboxplot - Yu Qin"><link rel="icon" href="/blog/favicon.svg"><link rel="stylesheet" href="https://unpkg.com/nanoreset@3.0.1/nanoreset.min.css"><link rel="stylesheet" href="/blog/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/blog/atom.xml" title="å•†ä¸šä¸æ•°æ®"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/blog/atom.xml" title="å•†ä¸šä¸æ•°æ®" type="application/atom+xml">
<!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><div class="wrap" id="barba-wrapper"><header><h1 class="branding"><a href="/blog/" title="å•†ä¸šä¸æ•°æ®">å•†ä¸šä¸æ•°æ®</a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link no-barba" href="/blog/" target="_self">HOME</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/blog/archives" target="_self">ARCHIVES</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="https://github.com/YuPototo" target="_blank">GITHUB</a></li></ul></header><div class="barba-container"><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">ggplotç³»åˆ—ä¹‹ï¼šboxplot</h1><div class="post-info"><a></a>2019-04-15</div><div class="post-content"><img src="/blog/2019/04/15/2019-04-15-ggplot%E7%B3%BB%E5%88%973/plot_2.png" class="" title="å„å¤§ä¿±ä¹éƒ¨çš„å·¥èµ„ç»“æ„">

<!-- hexo-inject:begin --><!-- hexo-inject:end --><p>æ•°æ®å¯è§†åŒ–çš„å¸¸è§åœºæ™¯ä¹‹ä¸€æ˜¯ï¼šå±•ç¤ºä¸€ä¸ª categorical variable å’Œä¸€ä¸ª numeric variable çš„å…³ç³»ã€‚</p>
<p>è¿™æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ boxplotã€‚</p>
<p>è¿™é‡Œä½¿ç”¨äº† <a href="https://www.kaggle.com/karangadiya/fifa19/data" target="_blank" rel="noopener">FIFA çš„çƒå‘˜æ•°æ®é›†</a>ã€‚</p>
<a id="more"></a>

<h2 id="å¤§çƒé˜Ÿçš„å·¥èµ„çŠ¶å†µå¦‚ä½•ï¼Ÿ"><a href="#å¤§çƒé˜Ÿçš„å·¥èµ„çŠ¶å†µå¦‚ä½•ï¼Ÿ" class="headerlink" title="å¤§çƒé˜Ÿçš„å·¥èµ„çŠ¶å†µå¦‚ä½•ï¼Ÿ"></a>å¤§çƒé˜Ÿçš„å·¥èµ„çŠ¶å†µå¦‚ä½•ï¼Ÿ</h2><p>æˆ‘ä»¬æƒ³å±•ç¤ºå‡ ä¸ªå¤§çƒé˜Ÿçš„å·¥èµ„çŠ¶å†µï¼Œæ¶‰åŠä¸¤ä¸ªå˜é‡ï¼š</p>
<ul>
<li>çƒé˜Ÿï¼šcategorical variable</li>
<li>æ¯ä¸ªçƒå‘˜çš„å·¥èµ„ï¼šnumerical variable</li>
</ul>
<p>æˆ‘ä»¬å…ˆæå–å‡ ä¸ªå¤§ä¿±ä¹éƒ¨çš„æ•°æ®ï¼Œå¹¶æŠŠå‘¨è–ªä¿®æ”¹ä¸ºä¸‡æ¬§ï¼š</p>
<figure class="highlight r"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># éœ€è¦ä¿±ä¹éƒ¨</span></span><br><span class="line">clubs &lt;- c(<span class="string">'Real Madrid'</span>, <span class="string">'FC Barcelona'</span>, </span><br><span class="line">           <span class="string">'Manchester United'</span>, <span class="string">'Manchester City'</span>, <span class="string">'Liverpool'</span>, <span class="string">'Chelsea'</span>, <span class="string">'Arsenal'</span>,</span><br><span class="line">           <span class="string">'Borussia Dortmund'</span>, <span class="string">'FC Bayern MÃ¼nchen'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">wage_to_number &lt;- <span class="keyword">function</span>(wage) {</span><br><span class="line">  <span class="comment"># æŠŠå‘¨è–ªè½¬æ¢æˆä¸‡æ¬§</span></span><br><span class="line">  number_in_string &lt;- str_extract(wage, <span class="string">'\\d+'</span>)</span><br><span class="line">  number_in_1000 &lt;- as.numeric(number_in_string)</span><br><span class="line">  number_in_1000 * <span class="number">1000</span> / <span class="number">10000</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line">sub_dat &lt;- dat %&gt;%</span><br><span class="line">  filter(Club %<span class="keyword">in</span>% clubs) %&gt;%</span><br><span class="line">  mutate(Wage = wage_to_number(Wage))</span><br></pre></td></tr></tbody></table></figure>

<p>ä¸‹é¢åˆ¶ä½œ boxplotï¼š</p>
<figure class="highlight r"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ggplot(sub_dat) +</span><br><span class="line">  geom_boxplot(aes(x = Club, y = Wage)) +</span><br><span class="line">  labs(x = <span class="literal">NULL</span>,</span><br><span class="line">       y = <span class="string">'å·¥èµ„ï¼ˆå‘¨è–ªï¼šä¸‡æ¬§ï¼‰'</span>,</span><br><span class="line">       title = <span class="string">'å„å¤§ä¿±ä¹éƒ¨çš„å·¥èµ„ç»“æ„'</span>) +</span><br><span class="line">  coord_flip() </span><br></pre></td></tr></tbody></table></figure>

<p>ç»“æœå¦‚å›¾ï¼š</p>
<img src="/blog/2019/04/15/2019-04-15-ggplot%E7%B3%BB%E5%88%973/plot_0.png" class="" title="å„å¤§ä¿±ä¹éƒ¨çš„å·¥èµ„ç»“æ„">

<p>ä»è¿™ä¸ªå›¾å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>è¥¿è¶…åŒé›„ã€æ›¼åŸå’Œå°¤æ–‡å›¾æ–¯çš„å·¥èµ„ä¸­ä½æ•°æœ€é«˜</li>
<li>å¤šç‰¹è’™å¾·çš„å·¥èµ„æ°´å¹³æœ€ä½ï¼Œç¡®å®æ˜¯è¿™å‡ ä¸ªé˜Ÿé‡Œç»æµå®åŠ›æœ€ä½çš„</li>
<li>åˆ©ç‰©æµ¦ã€åˆ‡å°”è¥¿ã€é˜¿æ£®çº³ã€æ‹œä»åœ¨ç»´æŒç›¸å¯¹å‡è¡¡çš„æ”¶å…¥çš„åŒæ—¶ï¼Œè¿˜å…è®¸è¶…çº§å·¨æ˜Ÿæœ‰é«˜æ”¶å…¥</li>
<li>å·´å¡ç½—é‚£æœ‰ä¸€ä¸ªæ”¶å…¥æœ€é«˜çš„å®¶ä¼™ï¼Œä¸ç”¨æƒ³ï¼Œå½“ç„¶æ˜¯æ¢…è¥¿å•¦</li>
</ul>
<h2 id="æˆ‘ä»¬æƒ³æ ‡æ³¨å‡ºå‡ ä¸ªç¦»ç¾¤å€¼"><a href="#æˆ‘ä»¬æƒ³æ ‡æ³¨å‡ºå‡ ä¸ªç¦»ç¾¤å€¼" class="headerlink" title="æˆ‘ä»¬æƒ³æ ‡æ³¨å‡ºå‡ ä¸ªç¦»ç¾¤å€¼"></a>æˆ‘ä»¬æƒ³æ ‡æ³¨å‡ºå‡ ä¸ªç¦»ç¾¤å€¼</h2><p>æœ‰å‡ ä¸ªçƒé˜Ÿæœ‰æ”¶å…¥è¿œè¿œé«˜äºé˜Ÿå‹çš„çƒå‘˜ï¼Œæˆ‘ä»¬æƒ³çœ‹çœ‹ä»–ä»¬ç©¶ç«Ÿæ˜¯è°ï¼ˆè™½ç„¶çŒœä¹Ÿèƒ½çŒœåˆ°äº† <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f60a.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f60a.png?v8">ğŸ˜Š</span>)ï¼Œå¹¶æŠŠä»–ä»¬çš„åå­—æ ‡æ³¨åœ¨å›¾ç‰‡ä¸Šã€‚</p>
<p>å…ˆæ¸…ç†æ•°æ®ï¼š</p>
<figure class="highlight r"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">outliner_club &lt;- c(<span class="string">'FC Barcelona'</span>, <span class="string">'Liverpool'</span>, <span class="string">'Chelsea'</span>, <span class="string">'Arsenal'</span>, <span class="string">'FC Bayern MÃ¼nchen'</span>)</span><br><span class="line">outliner_player &lt;- sub_dat %&gt;% </span><br><span class="line">  filter(Club %<span class="keyword">in</span>% outliner_club) %&gt;%</span><br><span class="line">  group_by(Club) %&gt;%</span><br><span class="line">  filter(Wage == max(Wage))</span><br></pre></td></tr></tbody></table></figure>

<p>æˆ‘ä»¬æå–å‡ºäº†å‡ ä¸ªæœ‰ç¦»ç¾¤å€¼çš„ä¿±ä¹éƒ¨æ”¶å…¥æœ€é«˜çš„çƒå‘˜ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬åœ¨å›¾ç‰‡ä¸Šæ·»åŠ  labelï¼š</p>
<figure class="highlight r"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ggplot(sub_dat, aes(x = Club, y = Wage)) +</span><br><span class="line">  geom_boxplot() +</span><br><span class="line">  geom_label(data = outliner_player,</span><br><span class="line">             aes(label = Name),</span><br><span class="line">             nudge_x = <span class="number">0.25</span>,</span><br><span class="line">             nudge_y = <span class="number">0.25</span>, </span><br><span class="line">             label.size = <span class="number">0.1</span>) +</span><br><span class="line">  labs(x = <span class="literal">NULL</span>,</span><br><span class="line">       y = <span class="string">'å·¥èµ„ï¼ˆå‘¨è–ªï¼šä¸‡æ¬§ï¼‰'</span>,</span><br><span class="line">       title = <span class="string">'å„å¤§ä¿±ä¹éƒ¨çš„å·¥èµ„ç»“æ„'</span>) +</span><br><span class="line">  coord_flip() </span><br></pre></td></tr></tbody></table></figure>


<p>ç»“æœå¦‚ä¸‹ï¼š</p>
<img src="/blog/2019/04/15/2019-04-15-ggplot%E7%B3%BB%E5%88%973/plot_1.png" class="" title="å„å¤§ä¿±ä¹éƒ¨çš„å·¥èµ„ç»“æ„+ç¦»ç¾¤å€¼">

<p>å„ä¸ªå…¨é˜Ÿçš„å¼‚å¸¸é«˜æ”¶å…¥çƒå‘˜å¦‚ä¸‹ï¼š</p>
<ul>
<li>å·´è¨ï¼šæ¢…è¥¿</li>
<li>åˆ‡å°”è¥¿ï¼šCç½—</li>
<li>æ‹œä»ï¼šJç½—</li>
<li>åˆ©ç‰©æµ¦ï¼šè¨æ‹‰èµ«</li>
<li>åˆ‡å°”è¥¿ï¼šé˜¿æ‰å°”</li>
<li>é˜¿æ£®çº³ï¼šå¥¥å·´æ¢…æ¨</li>
</ul>
<p>æœ‰æ„æ€çš„æ˜¯ï¼Œåˆ©ç‰©æµ¦çš„æœ€é«˜è–ªçƒå‘˜è¨æ‹‰èµ«ï¼Œè–ªèµ„æ°´å¹³åœ¨çš‡é©¬ä¹Ÿåªå±äºå‰1/4ï¼Œåœ¨å·´è¨ç”šè‡³ä¸åˆ°æ¢…è¥¿çš„ä¸€åŠã€‚å¯è§è¥¿è¶…åŒé›„çš„è´­ä¹°åŠ›äº†ã€‚</p>
<h2 id="ç»™æ›¼è”ä¸Šè‰²"><a href="#ç»™æ›¼è”ä¸Šè‰²" class="headerlink" title="ç»™æ›¼è”ä¸Šè‰²"></a>ç»™æ›¼è”ä¸Šè‰²</h2><p>ä½œä¸ºä¸€ä¸ªæ›¼è”çƒè¿·ï¼Œæˆ‘æƒ³ç»™æ›¼è”çš„ box æ¶‚ä¸Šæ›¼è”çº¢è‰²ï¼Œç„¶åç»™æ­»æ•Œåˆ©ç‰©æµ¦æ¶‚ä¸Šä»–ä»¬æ­»æ•ŒåŸƒå¼—é¡¿çš„è“è‰² <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png?v8">ğŸ˜ƒ</span>ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<figure class="highlight r"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">sub_dat &lt;- sub_dat %&gt;%</span><br><span class="line">  mutate(isManU = case_when(</span><br><span class="line">    Club == <span class="string">'Manchester United'</span> ~ <span class="string">'ManU'</span>,</span><br><span class="line">    Club == <span class="string">'Liverpool'</span> ~ <span class="string">'Liv'</span>,</span><br><span class="line">    <span class="literal">TRUE</span> ~ <span class="string">'rest'</span></span><br><span class="line">    ))</span><br><span class="line"></span><br><span class="line">ggplot(sub_dat) +</span><br><span class="line">  geom_boxplot(aes(x = Club, y = Wage, fill=isManU)) +</span><br><span class="line">  scale_fill_manual(breaks = c(<span class="string">"Liv"</span>, <span class="string">"ManU"</span>, <span class="string">"rest"</span>), </span><br><span class="line">                    values=c(<span class="string">"#003399"</span>, <span class="string">"#DA291C"</span>, <span class="string">"white"</span>)) +</span><br><span class="line">  labs(x = <span class="literal">NULL</span>,</span><br><span class="line">       y = <span class="string">'å·¥èµ„ï¼ˆå‘¨è–ªï¼šä¸‡æ¬§ï¼‰'</span>,</span><br><span class="line">       title = <span class="string">'å„å¤§ä¿±ä¹éƒ¨çš„å·¥èµ„ç»“æ„'</span>) +</span><br><span class="line">  coord_flip()  +</span><br><span class="line">  theme(legend.position = <span class="string">"none"</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>ç»“æœå¦‚ä¸‹å›¾ï¼š</p>
<img src="/blog/2019/04/15/2019-04-15-ggplot%E7%B3%BB%E5%88%973/plot_2.png" class="" title="å„å¤§ä¿±ä¹éƒ¨çš„å·¥èµ„ç»“æ„">


<p>å¸Œæœ›åˆ©ç‰©æµ¦çƒè¿·çœ‹åˆ°äº†ä¸è¦æ‰“æˆ‘ <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f4a3.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f4a3.png?v8">ğŸ’£</span></p>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script></div></article></div></main><footer><div class="paginator"><a class="prev" href="/blog/2019/05/01/2019-05-01-userGrow-2/">prev</a><a class="next" href="/blog/2019/04/05/2019-04-05-RorPython/">next</a></div><div class="copyright"><p>&copy; 2020 <a href="http://yoursite.com">Yu Qin</a><br>Powered by <a href="https://hexo.io/" rel="noreferrer" target="_blank">Hexo</a></p></div></footer></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
    Barba.Pjax.start()
})</script><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>